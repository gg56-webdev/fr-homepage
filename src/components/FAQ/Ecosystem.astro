---
import { localizePath } from 'astro-i18next'
import { t } from 'i18next'
import { NAV_LINKS, COINGECKO_LINK } from '@/constants'
import { Image } from 'astro:assets'
import logo from '@/assets/logo.webp'
import Apple from '../DownloadBtn/Apple.astro'
import Google from '../DownloadBtn/Google.astro'

const products = [
  [
    'App',
    localizePath(NAV_LINKS.HOME.href),
    'bg-indigo-600 translate-x-[calc(cos(0deg+var(--a))*var(--r))] translate-y-[calc(sin(0deg+var(--a))*var(--r))]',
  ],
  [
    'Bot',
    localizePath(NAV_LINKS.BOT.href),
    'bg-rose-700 translate-x-[calc(cos(90deg+var(--a))*var(--r))] translate-y-[calc(sin(90deg+var(--a))*var(--r))]',
  ],
  [
    'Token',
    localizePath(NAV_LINKS.TOKEN.href),
    'bg-sky-700 translate-x-[calc(cos(180deg+var(--a))*var(--r))] translate-y-[calc(sin(180deg+var(--a))*var(--r))]',
  ],
  [
    'Millage',
    localizePath(NAV_LINKS.HOME.href) + '#som',
    'bg-purple-700 translate-x-[calc(cos(270deg+var(--a))*var(--r))] translate-y-[calc(sin(270deg+var(--a))*var(--r))]',
  ],
] as const
---

<div class="flex flex-col gap-16 sticky top-20">
  <h2 class="text-2xl font-bold text-center">{t('links.ecosystem')}</h2>
  <div
    class="self-center [--r:100px] [--a:0deg] w-[calc(var(--r)*2)] rounded-full grid [&:has(>a:is(:hover,:focus))_a:not(:hover,:focus)]:opacity-75 transition-shadow hover:ring-0 aspect-square ring-cyberLilac ring-2 relative text-center hover:[animation-play-state:paused] focus-within:[animation-play-state:paused] animate-orbit"
  >
    <Image src={logo} loading="eager" alt="FingeRate logo" class="w-20 rounded-full absolute place-self-center" />

    {
      products.map(([text, href, classes]) => (
        <a
          {href}
          class={`${classes} hover:ring-2 font-bold ring-white transition-[box-shadow,opacity] [--s:75px] grid absolute w-[--s] rounded-full place-items-center aspect-square left-[calc(var(--r)-(var(--s)/2))] top-[calc(var(--r)-(var(--s)/2))]`}
        >
          {text}
        </a>
      ))
    }
  </div>
  <div class="grid bg-slate-950/80 p-8 rounded-lg">
    <a
      href={NAV_LINKS.WHITEPAPER.href}
      target="_blank"
      rel="noopener noreferrer"
      class="hover:text-neonBlue p-3 transition focus:outline-none focus:ring-2 flex items-center gap-1 focus:ring-blue-200"
      >{t('links.whitepaper')}
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
        class="w-4 h-4"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"
        ></path>
      </svg>
    </a>
    <a
      href={COINGECKO_LINK}
      target="_blank"
      rel="noopener noreferrer"
      class="hover:text-neonBlue p-3 transition focus:outline-none focus:ring-2 flex items-center gap-1 focus:ring-blue-200"
      >{t('faq.ecosystem.link')}
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
        class="w-4 h-4"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"
        ></path>
      </svg>
    </a>
    <div class="mt-8 flex gap-4 flex-wrap">
      <Google />
      <Apple />
    </div>
  </div>
</div>

<style>
  @property --a {
    syntax: '<angle>';
    initial-value: 0deg;
    inherits: true;
  }
</style>
